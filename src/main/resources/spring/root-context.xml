<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"
	xmlns:mybatis-spring="http://mybatis.org/schema/mybatis-spring"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:task="http://www.springframework.org/schema/task"
	xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-4.3.xsd
		http://mybatis.org/schema/mybatis-spring http://mybatis.org/schema/mybatis-spring-1.2.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd
		http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-4.3.xsd">

		<aop:aspectj-autoproxy></aop:aspectj-autoproxy>

	<!--
		<bean id="configProperties" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		       <property name="locations">
		           <list>
		           	<value>/WEB-INF/spring/setting.properties</value>
		               &lt;!&ndash; <value>classpath:/egovframework/egovProps/globals.properties</value> &ndash;&gt;
		               &lt;!&ndash; value>file:/product/jeus/egovProps/globals.properties</value&ndash;&gt;
		           </list>
		       </property>
		   </bean>
    -->



	<bean id="propertyConfigurator" class="org.jasypt.spring31.properties.EncryptablePropertyPlaceholderConfigurer">
		<constructor-arg ref="configurationEncryptor"/>
		<property name="locations">
			<list>
				<value>classpath:spring/setting.properties</value>
			</list>
		</property>
	</bean>

	<bean id="environmentVariablesConfiguration" class="org.jasypt.encryption.pbe.config.EnvironmentStringPBEConfig">
		<property name="algorithm" value="PBEWithMD5AndDES"  />
		<property name="passwordEnvName" value="APP_ENCRYPTION_PASSWORD" />
	</bean>

	<bean id="configurationEncryptor" class="org.jasypt.encryption.pbe.StandardPBEStringEncryptor">
		<property name="config" ref="environmentVariablesConfiguration"/>
		<property name="password" value="rktwlsrud" />
	</bean>


		<bean id="hikariConfig" class="com.zaxxer.hikari.HikariConfig">
			<property name="driverClassName" value="net.sf.log4jdbc.sql.jdbcapi.DriverSpy"></property>
			<property name="jdbcUrl" value="#{config.url}"></property>
			<property name="username" value="#{config.userName}"></property>
			<property name="password" value="#{config.password}"></property>
		</bean>
	<!--	<bean id="hikariConfig" class="com.zaxxer.hikari.HikariConfig">
			<property name="driverClassName" value="net.sf.log4jdbc.sql.jdbcapi.DriverSpy"></property>
			<property name="jdbcUrl" value="${Local.Url}"></property>
			<property name="username" value="${Local.UserName}"></property>
			<property name="password" value="${Local.Password}"></property>
		</bean>-->
	<!--	<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
			<property name="driverClassName" value="net.sf.log4jdbc.sql.jdbcapi.DriverSpy"></property>
			<property name="url" value="${Local.Url}"></property>
			<property name="username" value="${Local.UserName}"></property>
			<property name="password" value="${Local.Password}"></property>
		</bean>-->
		<bean id="dataSource" class="com.zaxxer.hikari.HikariDataSource" destroy-method="close">
			<constructor-arg ref="hikariConfig" />
		</bean>



		<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
		<property name="dataSource" ref="dataSource" />
		<property name="configLocation" value="classpath:/mybatis-config.xml"></property>
		<property name="mapperLocations" value="classpath:com/thearc/mapper/**/*Mapper.xml"></property>
	</bean>

	<bean id="transactionManager"
		class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
		<property name="dataSource" ref="dataSource"></property>
	</bean>

	<tx:annotation-driven />

	<bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate"
		destroy-method="clearCache">
		<constructor-arg name="sqlSessionFactory" ref="sqlSessionFactory"></constructor-arg>
	</bean>

	<bean id="ipAddress" class="java.lang.String">
		<constructor-arg value="#{config.ipAddress}">
		</constructor-arg>
	</bean>
	<bean id="mailPw" class="java.lang.String">
		<constructor-arg value="#{config.mailPw}">
		</constructor-arg>
	</bean>


	<bean id="encrypt" class="com.thearc.util.EncryptUtil">
	</bean>
<!--

	&lt;!&ndash; Google 소셜 로그인 연결 설정 &ndash;&gt;
	<bean id = "googleConnectionFactory" class="org.springframework.social.google.connect.GoogleConnectionFactory">
		<constructor-arg value="755792594137-ds9engajnsjvip5mvpetccoql5568af9.apps.googleusercontent.com"/>
		<constructor-arg value="aP8wZE8SuNf6A1Q43qrKeT6U"/>
	</bean>

	<bean id = "googleOAuth2Parameters" class="org.springframework.social.oauth2.OAuth2Parameters">
		<property name="scope" value="https://www.googleapis.com/auth/plus.login"></property>
		<property name="redirectUri" value="http://localhost:8080/thearc/googleSignInCallback"/>

	</bean>
-->





	<context:component-scan base-package="com.thearc.persistence"></context:component-scan>
	 <context:component-scan base-package="com.thearc.service"></context:component-scan>
	 <context:component-scan base-package="com.thearc.aop"></context:component-scan>

    <mybatis-spring:scan base-package="com.thearc.mapper"></mybatis-spring:scan>
	<aop:config>
	</aop:config>

	<!--<bean id="aopLogTest" class="com.thearc.util.AOPTest"></bean>-->

<!--	<aop:config>
		<aop:pointcut id="allPointcut" expression="execution(* com.thearc.service.*.*(..))"/>

		<aop:aspect ref="aopLogTest" >
			<aop:before pointcut-ref="allPointcut" method="printLog" />
		</aop:aspect>
	</aop:config>-->

	<task:annotation-driven/>

	<context:component-scan base-package="com.thearc.task"></context:component-scan>

    <!--<bean id="naverLoginBO" class="com.thearc.util.sns.NaverLoginBO" />-->
	<beans profile="local">
		<bean id="config" class="com.thearc.domain.ConfigProfile">
			<property name="url" value="${Local.Url}"/>
			<property name="userName" value="${Local.UserName}"/>
			<property name="password" value="${Local.Password}"/>
			<property name="ipAddress" value="${Local.IpAddress}"/>
			<property name="uploadPath" value="${Local.UploadPath}"/>
			<property name="mailPw" value="${MailPw}"/>
			<property name="naverClientId" value="${Local.naverClientId}"/>
			<property name="naverSecret" value="${Local.naverSecret}"/>
		</bean>
	</beans>

	<beans profile="server">
		<bean id="config" class="com.thearc.domain.ConfigProfile">
			<property name="url" value="${Server.Url}"/>
			<property name="userName" value="${Server.UserName}"/>
			<property name="password" value="${Server.Password}"/>
			<property name="ipAddress" value="${Server.IpAddress}"/>
			<property name="uploadPath" value="${Server.UploadPath}"/>
			<property name="mailPw" value="${MailPw}"/>
			<property name="naverClientId" value="${Server.naverClientId}"/>
			<property name="naverSecret" value="${Server.naverSecret}"/>
		</bean>
	</beans>



</beans>

